{{ $js := "js/feather.min.js" | absURL }}
<script src="{{ $js }}"></script>

<script>
const toggle = document.getElementById('dark-mode-toggle');
const body = document.body;

// Set default: dark mode
body.classList.add('dark-mode');

// Apply saved preference
const saved = localStorage.getItem('dark-mode');
if (saved === 'true') {
  body.classList.add('dark-mode');
  body.classList.remove('light-mode');
} else if (saved === 'false') {
  body.classList.remove('dark-mode');
  body.classList.add('light-mode');
}

// Function to update the toggle icon
function updateIcon() {
  const iconEl = toggle.querySelector('i');
  if (body.classList.contains('dark-mode')) {
    iconEl.setAttribute('data-feather', 'moon'); // Dark mode: moon
  } else {
    iconEl.setAttribute('data-feather', 'sun');  // Light mode: sun
  }
  feather.replace(); // Re-render Feather icon
}

// Set initial icon
updateIcon();

// Toggle dark/light mode on button click
toggle.addEventListener('click', () => {
  if (body.classList.contains('dark-mode')) {
    body.classList.remove('dark-mode');
    body.classList.add('light-mode');
    localStorage.setItem('dark-mode', 'false');
  } else {
    body.classList.add('dark-mode');
    body.classList.remove('light-mode');
    localStorage.setItem('dark-mode', 'true');
  }
  updateIcon();
});
</script>
