<!doctype html>




<html lang="en">
  <head><script src="/livereload.js?mindelay=10&amp;v=2&amp;port=1313&amp;path=livereload" data-no-instant defer></script>


  
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fontsource/geist-sans/index.min.css">



  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
  <meta name="generator" content="Hugo 0.139.3">
  
  <link rel="stylesheet" href="http://localhost:1313/css/bootstrap.min.css">
  
  
  <title>Mains Switch Over</title>
  <style>

 
body {
  background-color: #FFFFFF;
  font-family: 'Geist Sans', sans-serif;
  font-weight: 400;
  font-size: 16px;
}

h1, h2, h3 {
  font-family: "Geist Sans", sans-serif;
  font-weight: 900;
}

.container {
  max-width: 910px;
}


 
#nav-border {
  border-bottom: 1px solid #212529;
}

#nav {
  font-family: "Geist Sans", sans-serif;
  position: sticky;
  top: 0;
  background: white;
}

#nav a {
  font-weight: bold;
  color: inherit;
}

#nav .nav-link {
  font-weight: 900;
}

#nav i {
  color: inherit;
  width: 1em;
  height: 1em;
  vertical-align: middle;
}
.nav-link, #dark-mode-toggle {
  color: var(--nav-text-color);
}

 
:root {
  --nav-text-color: #000;
}

 
body.dark-mode {
  --nav-text-color: #fff;
}

 
#main {
  margin-top: 1em;
  margin-bottom: 4em;
}

#home-jumbotron {
  background-color: inherit;
  font-family: "Geist Sans", sans-serif;
}

#home-jumbotron h1 {
  font-weight: 900;
}

#home-jumbotron p {
  font-weight: 400;
}

.font-125 {
  font-size: 125%;
}

img {
  max-width: 100%;
}

.btn {
  margin-bottom: 0.3em;
  margin-right: 0.3em;
}


 
a {
  color: #333;
  font-size: 1rem;
  font-weight: bold;
  text-decoration: none;
  transition: color 0.3s, text-decoration 0.3s;
}

a:hover {
  color: #0070f3;
  text-decoration: underline;
}


 
table {
  width: 100%;
  border-collapse: collapse;
  border-radius: 10px;
  overflow: hidden;
  box-shadow: 0px 4px 10px rgba(0, 0, 0, 0.1);
  background: white;
}

th {
  background-color: #212529;
  color: white;
  padding: 12px;
  text-align: left;
  font-weight: bold;
  text-transform: uppercase;
}

td {
  padding: 12px;
  border-bottom: 1px solid #ddd;
}

tr:nth-child(even) {
  background-color: #f8f8f8;
}

tr:hover {
  background-color: #e3f2fd;
  transition: background 0.3s;
}

@media (max-width: 768px) {
  table { display: block; overflow-x: auto; white-space: nowrap; }
}


 
pre {
  background: #f4f4f4;
  border: 1px solid #ddd;
  border-left: 3px solid #f36d33;
  color: #222;
  font-family: monospace;
  font-size: 13px;
  line-height: 1.6;
  margin-bottom: 1.6em;
  max-width: 100%;
  overflow: auto;
  padding: 1em 1.5em;
  display: block;
  word-wrap: break-word;
}

code {
  font-size: 14px;
}


 
.card {
  border-radius: 12px;
  overflow: hidden;
  background: #ffffff;
  box-shadow: 0px 4px 10px rgba(0, 0, 0, 0.1);
  transition: transform 0.3s ease, box-shadow 0.3s ease;
}

.card:hover {
  transform: translateY(-5px);
  box-shadow: 0px 10px 20px rgba(0, 0, 0, 0.2);
}

 
.card-img-top {
  width: 100%;
  height: 200px;
  object-fit: cover;
  position: relative;
  transition: transform 0.3s ease-in-out;
}

 
.card:hover .card-img-top {
  transform: scale(1.05);
}

 
.card-img-top::before {
  content: "";
  position: absolute;
  inset: 0;
  background: linear-gradient(to bottom, rgba(0,0,0,0.1), rgba(0,0,0,0.3));
  opacity: 0.5;
  transition: opacity 0.3s ease-in-out;
}

.card:hover .card-img-top::before {
  opacity: 0.8;
}

.card-body {
  padding: 15px;
  text-align: center;
}

.card-title {
  font-size: 1.2rem;
  font-weight: bold;
  color: #333;
  transition: color 0.3s;
}

.card:hover .card-title {
  color: #0070f3;
}


 

 
.section-travel h1 {
  text-align: left;
  margin-bottom: 0.5rem;
  font-size: 2rem;
}

.section-travel .page-subtitle {
  text-align: center;
  color: #666;
  font-size: 1.05rem;
  margin-bottom: 1.5rem;
}

 
.section-travel .travel-cards {
  display: flex;
  flex-direction: column;
  gap: 2rem;  
}

 
.section-travel .card {
  display: flex;
  flex-direction: column;
  overflow: hidden;
  border-radius: 12px;
  background: #ffffff;
  box-shadow: 0 6px 18px rgba(0,0,0,0.06);
  transition: transform 0.3s ease, box-shadow 0.3s ease;
}

.section-travel .card:hover {
  transform: translateY(-5px);
  box-shadow: 0 10px 20px rgba(0,0,0,0.15);
}

 
.section-travel .card > a {
  display: block;
  color: inherit;
  text-decoration: none;
}

 
.section-travel .card-img-top {
  width: 100%;
  height: 400px;        
  object-fit: cover;
  object-position: center;
  border-radius: 12px 12px 0 0;
  transition: transform 0.35s ease;
}

.section-travel .card:hover .card-img-top {
  transform: scale(1.03);
}

 
.section-travel .card-img-top::before {
  content: "";
  position: absolute;
  inset: 0;
  background: linear-gradient(to bottom, rgba(0,0,0,0.05), rgba(0,0,0,0.15));
  pointer-events: none;
}

 
.section-travel .card-body {
  padding: 1.2rem 1rem;
  text-align: left;
}

.section-travel .card-title {
  font-size: 1.2rem;
  font-weight: 700;
  margin-bottom: 0.25rem;
}

.section-travel time {
  display: inline-block;
  color: #777;
  font-size: 0.95rem;
}

 
.section-travel .card.no-image {
  min-height: 160px;
  background: #fafafa;
  border: 1px dashed rgba(0,0,0,0.06);
  display: flex;
  align-items: center;
  justify-content: center;
  padding: 1.2rem;
}

 
@media (max-width: 600px) {
  .section-travel .card-img-top {
    height: 280px;  
  }
}

 
button.copybtn {
  transition: opacity .3s ease-in-out;
  opacity: .15;
  padding: 2px 6px;
  position: absolute;
  right: 4px;
  top: 4px;
}

div.highlight .copybtn:hover {
  opacity: 1;
  border-color: #51a7e8;
}

div.highlight {
  position: relative;
}


 
.col {
  padding-left: 0;
}

.small {
  max-width: 400px;
  margin: 1rem 0;
  border-top: 1px solid rgba(0, 0, 0, 0.1);
}

 


body.dark-mode {
  background-color: #121212;
  color: #e0e0e0;
  transition: background-color 0.3s, color 0.3s;
}

 
body.dark-mode a {
  color: #eee;  
  transition: color 0.3s;
}

body.dark-mode a:hover {
  color: #d0aaff;
}

 
body.dark-mode .card {
  background-color: #1e1e1e;
  box-shadow: 0px 4px 10px rgba(0,0,0,0.5);
  transition: background-color 0.3s, box-shadow 0.3s;
}

body.dark-mode .card-title {
  color: #ffffff;
}

body.dark-mode .card-body {
  color: #e0e0e0;
}

 
body.dark-mode table {
  background-color: #1e1e1e;
  color: #e0e0e0;
  border-collapse: collapse;
}

body.dark-mode th {
  background-color: #333;
  color: #fff;
}

body.dark-mode td {
  border-bottom: 1px solid #444;
}

 
body.dark-mode #nav {
  background-color: #121212;
  border-bottom: 1px solid #333;
  transition: background-color 0.3s, border-color 0.3s;
}

body.dark-mode #nav a {
  color: #eee;  
  transition: color 0.3s;
}

body.dark-mode #nav a:hover {
  color: #bbb;
}

 
#dark-mode-toggle {
  background: transparent;
  border: none;
  cursor: pointer;
  color: #000;  
  transition: color 0.3s;
}

body.dark-mode #dark-mode-toggle {
  color: #eee;  
}

#dark-mode-toggle i {
  color: inherit;         
  width: 1em;
  height: 1em;
  vertical-align: middle;
  transition: color 0.3s;
}

 
body.dark-mode *, body * {
  transition: background-color 0.3s, color 0.3s, border-color 0.3s, box-shadow 0.3s;
}


</style>

  <script type="text/javascript" async
  src="https://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML">
  MathJax.Hub.Config({
  tex2jax: {
    inlineMath: [['$','$'], ['\\(','\\)']],
    displayMath: [['$$','$$']],
    processEscapes: true,
    processEnvironments: true,
    skipTags: ['script', 'noscript', 'style', 'textarea', 'pre'],
    TeX: { equationNumbers: { autoNumber: "AMS" },
         extensions: ["AMSmath.js", "AMSsymbols.js"] }
  }
  });
  MathJax.Hub.Queue(function() {
    
    
    
    var all = MathJax.Hub.getAllJax(), i;
    for(i = 0; i < all.length; i += 1) {
        all[i].SourceElement().parentNode.className += ' has-jax';
    }
  });

  MathJax.Hub.Config({
  
  TeX: { equationNumbers: { autoNumber: "AMS" } }
  });
</script>







  
      <script async src="https://www.googletagmanager.com/gtag/js?id=G-8PKWFQVGKH"></script>
      <script>
        var doNotTrack = false;
        if ( false ) {
          var dnt = (navigator.doNotTrack || window.doNotTrack || navigator.msDoNotTrack);
          var doNotTrack = (dnt == "1" || dnt == "yes");
        }
        if (!doNotTrack) {
          window.dataLayer = window.dataLayer || [];
          function gtag(){dataLayer.push(arguments);}
          gtag('js', new Date());
          gtag('config', 'G-8PKWFQVGKH');
        }
      </script>

<script src="https://code.jquery.com/jquery-3.2.1.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/clipboard@1/dist/clipboard.min.js"></script>
</head>  


  <body>
    
        <div id="nav-border" class="container">
  <nav id="nav" class="nav justify-content-center align-items-center">

    
     
      
      
      <a class="nav-link" href="/"><i data-feather="home"></i> Home</a>
     
      
      
      <a class="nav-link" href="/electronics/"><i data-feather="cpu"></i> Electronics</a>
     
      
      
      <a class="nav-link" href="/food/"><i data-feather="heart"></i> Food</a>
     
      
      
      <a class="nav-link" href="/travel/"><i data-feather="aperture"></i> Travel</a>
     
      
      
      <a class="nav-link" href="/misc/"><i data-feather="coffee"></i> Misc</a>
     
      
      
      <a class="nav-link" href="/greenhouse/"><i data-feather="sun"></i> Greenhouse</a>
     
      
      
      <a class="nav-link" href="/archive/"><i data-feather="archive"></i> Archive</a>
    

    
<button id="dark-mode-toggle" class="btn btn-sm ms-2">
  <i></i>
</button>

  </nav>
</div>
 
        
    <div class="container">
      <main id="main">
      
<h1>Mains Switch Over</h1>


<i data-feather="calendar"></i> <time datetime="2024-09-15">Sep 15, 2024</time>

<br><br>
<h1 id="introduction">Introduction</h1>
<p>My dad has a large fish pond and would like to use the solar system to run the pumps, which require 150W of power. Can the solar system run the pumps 24/7?</p>
<h1 id="battery-capacity-overview">Battery Capacity Overview</h1>
<p>The battery system has a capacity of 170Ah at 24V, equating to 4kWh of total stored energy. In practice, the battery state of charge (SoC) should not drop below 20% to maintain battery health, resulting in 3.26kWh of usable energy.</p>
<p>This would run the pumps for approximately: <nr></p>
<p><strong>3.26kWh/150W = 21.76 hours</strong></p>
<p>To edge on the side of caution I will also assume that the real capacity is less than this as the batteries are 4 years old now. A safety factor of 0.85 would result in 18.5 hours of continuous pump use.</p>
<p>My hope is that during the day the batteries will be charged up and the system will be able to run the pumps throughout the night.</p>
<p>If the state of charge falls below 20%, the system should cut off to protect the batteries, but the pumps must continue to operate. To achieve this, an interface is required to switch the power supply from solar to mains when necessary.</p>
<h1 id="high-level-outline">High Level Outline</h1>
<p>For simplicity and ease of maintenance I would like to try and avoid any form of software. This should be achievable with the design below.</p>
<p align="center"> 
<img src="/greenhouse/images/mains_switchover/HLD.png" alt="drawing" width="800"/>
</p>
<p><strong>Fail Safe</strong></p>
<p>If the solar system is off, the default state of the interface relay connects the pumps to the house mains and keeps the pumps running.</p>
<p><strong>Normal Operation</strong></p>
<p>When the solar system is on, the Victron battery protect unit measures the battery voltage and enables the 24V system if the system voltage is above a programmable threshold value.</p>
<p>The alarm output of the battery protect unit in this scenario is low which results in the time delay relay staying in its normally connected state. This in turn enables the interface relay connecting the inverter to the pumps.</p>
<p>Should the system voltage go below the threshold value the time delay relay is triggered for 24 hours and the pumps are connected to mains power. Hopefully this is enough time for the batteries to be recharged by the solar system.</p>
<h1 id="components">Components</h1>
<p><strong>Interface Relay</strong></p>
<p>The relay must be able to cope with the switching current of the pumps which draw 0.65A (150W/230VAC). The <a href="https://uk.rs-online.com/web/p/electromechanical-interface-relays/1750529?gb=s">Phoenix Contact RIF-2-RSC-LDP-24DC/4X21 Series Interface Relay, DIN Rail Mount, 24V dc Coil, 4PDT, 4-Pole</a> has a switching current of 1A at 230VAC and a maximum continuous draw of 6A.</p>
<div class="container">
  <div class="row">
    <div class="col">
     <p align="center"> 
		<img src="/greenhouse/images/mains_switchover/change_over_relay.png" alt="drawing" width="300px"/>
	</p>
    </div>
  <div class="col">
     <p align="center"> 
		<img src="/greenhouse/images/mains_switchover/interface_relay_wiring.png" alt="drawing" width="300px"/>
	</p>
  </div>
</div>
</div>
<p><strong>Time Delay Relay</strong></p>
<div class="container">
  <div class="row">
    <div class="col">
      The <a href="https://www.geya.net/product/single-function-time-relay-grt8-b1/" target="_blank">GRT8-B1</a> is a 24V time delay relay that can be configured to delay up to 10 days with a reset function.
    </div>
    <div class="col">
      <p align="center">
        <img src="/greenhouse/images/mains_switchover/time_delay_Relay.jpg" alt="Time Delay Relay" width="300"/>
      </p>
    </div>
  </div>
</div>
<p><strong>Victron Inverter</strong></p>
<div class="container">
  <div class="row">
    <div class="col">
      The pumps require 150W of power so I have chosen the <a href="https://www.12voltplanet.co.uk/victron-energy-phoenix-pure-sine-wave-inverter-24v-375va-vedirect-enabled.html?srsltid=AfmBOoqnb53QjVgjuPILJef0MEc9qZr6HiRMyV2cSwMxgBe4dQrV1NCN" target="_blank">Victron 24V 375VA Inverter</a> despite there being a 250VA version available to better future proof the design.
    </div>
    <div class="col">
		<p align="center"> 
		<img src="/greenhouse/images/mains_switchover/victron_inverter_375va.jpg" alt="drawing" width="500"/>
		</p>
    </div>
  </div>
</div>
<p><strong>Battery Protect</strong></p>
<div class="container">
  <div class="row">
    <div class="col">
     	The Victron Battery Protect automatically disconnects loads when the system voltage drops below a programmable threshold. At 20% state of charge, the 12V170FS battery has a cell voltage of 2.00V that results in a total system voltage of 24V. This corresponds to Program 8 in the datasheet which will disconnect at 24V and reconnect once the system voltage rises to 26V. I’ve included a time delay relay because the MPPT charge controller from the solar system applies a daily boost voltage to the battery, which could falsely indicate that the battery is fully charged.
    </div>
    <div class="col">
		<p align="center"> 
		<img src="/greenhouse/images/mains_switchover/batteryprotect-12-24v-65a.jpg" alt="drawing" width="500"/>
		</p>
    </div>
  </div>
</div>
<h1 id="bom">BOM</h1>
<table>
  <thead>
      <tr>
          <th>Part Number</th>
          <th>Description</th>
          <th>Manufacturer</th>
          <th>Supplier</th>
          <th>Cost (£)</th>
      </tr>
  </thead>
  <tbody>
      <tr>
          <td>2903320</td>
          <td>Interface Relay</td>
          <td>Phoenix Contact</td>
          <td>RS</td>
          <td>13.26</td>
      </tr>
      <tr>
          <td>GRT8-B1</td>
          <td>Time Delay Relay</td>
          <td>Geya</td>
          <td>Amazon</td>
          <td>15.19</td>
      </tr>
      <tr>
          <td>Phoenix Pure Sine Wave Inverter - 24V 375VA</td>
          <td>Inverter</td>
          <td>Victron</td>
          <td>12V Planet</td>
          <td>107.14</td>
      </tr>
      <tr>
          <td>Smart Battery Protect 12/24V - 65A</td>
          <td>Battery Protect</td>
          <td>Victron</td>
          <td>12V Planet</td>
          <td>46.18</td>
      </tr>
      <tr>
          <td></td>
          <td></td>
          <td></td>
          <td></td>
          <td><strong>181.77</strong></td>
      </tr>
  </tbody>
</table>
<h1 id="wiring-diagram">Wiring Diagram</h1>
<p align="center"> 
<img src="/greenhouse/images/mains_switchover/SLD.png" alt="drawing" width="900"/>
</p>




<div id="disqus_thread"></div>
<script type="text/javascript">

(function() {
    
    
    if (window.location.hostname == "localhost")
        return;

    var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
    var disqus_shortname = 'www-mybrainhertz-co-uk';
    dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
    (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
})();
</script>
<noscript>Please enable JavaScript to view the <a href="https://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
<a href="https://disqus.com/" class="dsq-brlink">comments powered by <span class="logo-disqus">Disqus</span></a>



      </main>

    </div>
    
<script src="http://localhost:1313/js/feather.min.js"></script>

<script>
const toggle = document.getElementById('dark-mode-toggle');
const body = document.body;


if(localStorage.getItem('dark-mode') === 'true') {
  body.classList.add('dark-mode');
}


function updateIcon() {
  const iconEl = toggle.querySelector('i');
  if (body.classList.contains('dark-mode')) {
    iconEl.setAttribute('data-feather', 'moon'); 
  } else {
    iconEl.setAttribute('data-feather', 'sun');  
  }
  feather.replace(); 
}


updateIcon();


toggle.addEventListener('click', () => {
  body.classList.toggle('dark-mode');
  localStorage.setItem('dark-mode', body.classList.contains('dark-mode'));
  updateIcon();
});
</script>

   
    <script>
  function addCopyButtonToCode(){
    var allCodeBlocksElements = $( "div.highlight pre" );

    allCodeBlocksElements.each(function(ii) {

      var currentId = "codeblock" + (ii + 1);
      $(this).attr('id', currentId);

    feather.replace()
      var clipButton = '<button class="btn copybtn" data-clipboard-target="#' +
        currentId + '"><i data-feather="copy" width="20"></i></button>';
      $(this).after(clipButton);
    });

    var clipboard = new Clipboard('.btn');
    clipboard.on('success', function(e) {
      setTimeout(function() {
        
        e.clearSelection();
      }, 250);
    });
    clipboard.on('error', function(e) {
      $(e.trigger).text("Can't in Safari");
    });
  }
  $(document).ready(function () {
    
    addCopyButtonToCode();
  });



</script>   
  </body>
</html>